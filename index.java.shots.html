<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="Matt Wynne">
<title>BDD with Cucumber (Java)</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>BDD with Cucumber (Java)</h1>
<div class="details">
<span id="author" class="author">Matt Wynne</span><br>
<span id="email" class="email"><a href="mailto:matt@cucumber.io">matt@cucumber.io</a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_discovering_bdd">1. Discovering BDD</a></li>
<li><a href="#_your_first_scenario">2. Your first Scenario</a>
<ul class="sectlevel2">
<li><a href="#_an_introduction_to_shouty">2.1. An introduction to Shouty</a></li>
<li><a href="#_choose_the_first_scenario">2.2. Choose the first scenario</a></li>
<li><a href="#_install_cucumber">2.3. Install Cucumber</a></li>
<li><a href="#_add_a_scenario_wire_it_up">2.4. Add a scenario, wire it up</a></li>
<li><a href="#_sketch_out_the_solution">2.5. Sketch out the solution</a></li>
<li><a href="#_make_the_scenario_pass">2.6. Make the scenario pass</a></li>
</ul>
</li>
<li><a href="#_expressing_yourself">3. Expressing yourself</a></li>
<li><a href="#_cleaning_up">4. Cleaning up</a>
<ul class="sectlevel2">
<li><a href="#_the_importance_of_readability">4.1. The importance of readability</a></li>
<li><a href="#_review_changes_that_happened_while_we_were_away">4.2. Review changes that happened while we were away</a></li>
<li><a href="#_description_field">4.3. Description field</a></li>
<li><a href="#_the_before_hook">4.4. The "Before" hook</a></li>
<li><a href="#_create_person_in_a_generic_stepdef">4.5. Create Person in a generic stepdef</a></li>
<li><a href="#_backgrounds">4.6. Backgrounds</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_discovering_bdd">1. Discovering BDD</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_your_first_scenario">2. Your first Scenario</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The video and audio assets for this chapter are <a href="https://drive.google.com/drive/u/2/folders/1He7stdn0S-zIlNmWF-d1ISuyhfC7tMwO">here</a>.</p>
</div>
<div class="sect2">
<h3 id="_an_introduction_to_shouty">2.1. An introduction to Shouty</h3>
<div class="paragraph">
<p>Shouty is a social network that allows people who are physically close to communicate, just like people have always communicated with their voices. In the real world you can talk to someone in the same room, or across the street. Or even 100 m away from you in a park - if you shout.</p>
</div>
<div class="paragraph">
<p>That’s Shouty. What you say on this social network can only be “heard” by people who are nearby.</p>
</div>
<div class="audioblock">
<div class="content">
<audio src="https://drive.google.com/uc?id=185INaLm9jKvAZqvm-CzqpkfSyGt3C_kb" controls>
Your browser does not support the audio tag.
</audio>
</div>
</div>
<div class="videoblock">
<div class="content">
<video src="https://drive.google.com/uc?id=1coTuZC_HcN3RXfduRqnZMfzlYJStQ2hq" controls>
Your browser does not support the video tag.
</video>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_choose_the_first_scenario">2.2. Choose the first scenario</h3>
<div class="paragraph">
<p>Let’s start with a very basic example of Shouty’s behaviour. Something we might have discussed in a three amigos meeting:</p>
</div>
<div class="paragraph">
<p>Sean the shouter shouts "free bagels at Sean&#8217;s" and Lucy the listener who happens to be stood across the street from his store, 15 metres away, hears him. She walks into Sean’s Coffee and takes advantage of the offer.</p>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 1</span>
We can translate this into a Gherkin scenario so that Cucumber can run it. Here&#8217;s how that would look.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="gherkin"><span class="kn">Scenario</span><span class="p">:</span> Listener is within range
  <span class="nf">Given </span>Lucy is located 15m from Sean
  <span class="nf">When </span>Sean shouts <span class="s">"free bagels at Sean's"</span>
  <span class="nf">Then </span>Lucy hears Sean’s message</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can see there are four special keywords being used here. <code>Scenario</code> just tells Cucumber we’re about to describe an example that it can execute. Then you see the lines beginning with Given, When and Then.</p>
</div>
<div class="paragraph">
<p><span title="Highlight line 2" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 2: Highlight line 2</span>
<code>Given</code> is the context for the scenario. We’re putting the system into a specific state, ready for the scenario to unfold.</p>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 3</span>
<code>When</code> is an action. Something that happens to the system that will cause something else to happen: an outcome.</p>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 4</span>
<code>Then</code> is the outcome. It’s the behaviour we expect from the system when this action happens in this context.</p>
</div>
<div class="paragraph">
<p>You’ll notice we’ve omitted from our outcome anything about Lucy walking into Sean’s store and making a purchase. Remember, Gherkin is supposed to describe the behaviour of the system, so it would be distracting to have it in our scenario.</p>
</div>
<div class="paragraph">
<p>Each scenario has these three ingredients:
<span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 5</span>
  a context,
<span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 6</span>
  an action,
<span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 7</span>
  and one or more outcomes.</p>
</div>
<div class="paragraph">
<p>Together, they describe one single aspect of the behaviour of the system. An example.</p>
</div>
<div class="paragraph">
<p>Now that we’ve translated our example into Gherkin, we can automate it!</p>
</div>
</div>
<div class="sect2">
<h3 id="_install_cucumber">2.3. Install Cucumber</h3>
<div class="paragraph">
<p>The easiest way to get started with Cucumber for Java is to use a template
project with a build script that sets everything up correctly.</p>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 1</span>
You can download this template project from GitHub. Open your web browser and go
to the “Cucumber Java Skeleton” project on GitHub.</p>
</div>
<div class="paragraph">
<p>If you’re comfortable with Git you can just clone the project.</p>
</div>
<div class="paragraph">
<p>If you’re new to Git, don’t worry, we’ll download a zip file instead. Click
Releases,<span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 2</span> then download the most recent zip file that starts with a “v”.<span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 3</span></p>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 4</span>
On Windows, extract the zip file by double clicking on it. -Or if you’re on OS
ten or Linux, extract it with the unzip command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>unzip cucumber-java-skeleton-&lt;VERSION&gt;.zip</code></pre>
</div>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 5</span>
After extracting the zip file, we’ll rename the directory to “shouty”.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span><span class="nb">mv </span>cucumber-java-skeleton-&lt;VERSION&gt; shouty</code></pre>
</div>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 6</span>
In your shell, cd into the shouty directory.</p>
</div>
<div class="paragraph">
<p>The template project contains Maven and Ant build scripts that makes it easier
to get started with Cucumber for Java.</p>
</div>
<div class="paragraph">
<p>We’ll be using Maven, so if you haven’t installed that already, now is a good time to do that.</p>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 7</span>
Let’s take a look at what else is in this project.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>tree
<span class="nb">.</span>
├── build.gradle
├── gradle
│   └── wrapper
│       ├── gradle-wrapper.jar
│       └── gradle-wrapper.properties
├── gradlew
├── gradlew.bat
├── LICENCE
├── mvnw
├── mvnw.cmd
├── pom.xml
├── README.md
└── src
├── main
│   └── java
│       └── io
│           └── cucumber
│               └── skeleton
│                   └── Belly.java
└── <span class="nb">test</span>
├── java
│   └── io
│       └── cucumber
│           └── skeleton
│               ├── RunCucumberTest.java
│               └── StepDefinitions.java
└── resources
└── io
└── cucumber
└── skeleton
└── belly.feature

17 directories, 14 files</code></pre>
</div>
</div>
<div class="paragraph">
<p>There is a main directory for our application code,<span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 8</span> and a test directory for our test code.<span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 9</span>
Let’s remove some of the files that come with the project.</p>
</div>
<div class="paragraph">
<p>Remove <code>Belly.java</code>,<span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 10</span> <code>StepDefinitions.java</code> <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 11</span> and <code>belly.feature</code>.<span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 12</span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span><span class="nb">rm </span>src/main/java/io/cucumber/skeleton/Belly.java
<span class="nv">$ </span><span class="nb">rm </span>src/test/java/io/cucumber/skeleton/StepDefinitions.java
<span class="nv">$ </span><span class="nb">rm </span>src/test/resources/io/cucumber/skeleton/belly.feature</code></pre>
</div>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 13</span>
Now we have a bare bones project. We’ll be building it from the ground up so you can see what is going on.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>tree
<span class="nb">.</span>
├── build.gradle
├── gradle
│   └── wrapper
│       ├── gradle-wrapper.jar
│       └── gradle-wrapper.properties
├── gradlew
├── gradlew.bat
├── LICENCE
├── mvnw
├── mvnw.cmd
├── pom.xml
├── README.md
└── src
├── main
│   └── java
│       └── io
│           └── cucumber
│               └── skeleton
└── <span class="nb">test</span>
├── java
│   └── io
│       └── cucumber
│           └── skeleton
│               └── RunCucumberTest.java
└── resources
└── io
└── cucumber
└── skeleton

17 directories, 11 files</code></pre>
</div>
</div>
<div class="paragraph">
<p>Before we open the project in our IDE we are going to modify the name of the
application.</p>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 14</span>
Open pom.xml and change the group ID, <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 15</span> artifact ID <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 16</span> and name. <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 17</span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;project</span> <span class="err">...</span><span class="nt">&gt;</span>
    ...

    <span class="nt">&lt;groupId&gt;</span>cucumber-school<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>shouty<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>0.0.1<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;packaging&gt;</span>jar<span class="nt">&lt;/packaging&gt;</span>
    <span class="nt">&lt;name&gt;</span>Shouty<span class="nt">&lt;/name&gt;</span>

    ...
<span class="nt">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 18</span></p>
</div>
<div class="paragraph">
<p>We are ready to start coding! We are going to use IntelliJ IDEA Community
Edition because it has really nice Cucumber integration built-in. If you prefer
to use a different IDE such as Eclipse, that is fine too.</p>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 19</span>
To open the project in InteliJ, just open the pom.xml file.</p>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 20</span>
Before we create any files, let’s rename the package from skeleton to shouty. In
InteliJ you can rename it via the Refactor menu.</p>
</div>
<div class="paragraph">
<p>Now we’re ready to create our first feature file.</p>
</div>
</div>
<div class="sect2">
<h3 id="_add_a_scenario_wire_it_up">2.4. Add a scenario, wire it up</h3>
<div class="paragraph">
<p>Let&#8217;s create our first feature file. Call the file <code>hear_shout.feature</code> <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 1</span></p>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 2</span>
All feature files start with the keyword <code>Feature:</code>
<span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 3</span>
followed by a name.
It’s a good convention to give it a name that matches the file name.</p>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 4</span>
Now let’s write out our first scenario.</p>
</div>
<div class="listingblock">
<div class="title">hear_shout.feature</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="gherkin"><span class="kd">Feature</span><span class="p">:</span> Hear shout
  <span class="kn">Scenario</span><span class="p">:</span> Listener is within range
    <span class="nf">Given </span>Lucy is located 15 metres from Sean
    <span class="nf">When </span>Sean shouts <span class="s">"free bagels at Sean's"</span>
    <span class="nf">Then </span>Lucy hears Sean’s message</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now that we have a scenario it’s time to run it!</p>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 5</span>
Switch back to the command prompt and run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>mvn clean <span class="nb">test</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 6</span>
Maven will now download Cucumber, compile your code and tell Cucumber to run your feature file.</p>
</div>
<div class="paragraph">
<p>You’ll see that Cucumber has found our feature file and read it back to us. We can see a summary of the results at the bottom - 3 steps,<span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 7</span> one scenario <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 8</span> - all undefined.</p>
</div>
<div class="paragraph">
<p>Let’s run the scenario again from inside InteliJ.<span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 9</span>
Select the feature file <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 10</span> and choose Run from the context menu.<span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 11</span>
This will give you similar output.<span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 12</span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>mvn clean <span class="nb">test
</span>WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by com.google.inject.internal.cglib.core.<span class="nv">$ReflectUtils$1</span> <span class="o">(</span>file:/usr/share/maven/lib/guice.jar<span class="o">)</span> to method java.lang.ClassLoader.defineClass<span class="o">(</span>java.lang.String,byte[],int,int,java.security.ProtectionDomain<span class="o">)</span>
WARNING: Please consider reporting this to the maintainers of com.google.inject.internal.cglib.core.<span class="nv">$ReflectUtils$1</span>
WARNING: Use <span class="nt">--illegal-access</span><span class="o">=</span>warn to <span class="nb">enable </span>warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied <span class="k">in </span>a future release
<span class="o">[</span>INFO] Scanning <span class="k">for </span>projects...
<span class="o">[</span>INFO]
<span class="o">[</span>INFO] <span class="nt">-----------------------</span>&lt; cucumber-school:shouty <span class="o">&gt;</span><span class="nt">-----------------------</span>
<span class="o">[</span>INFO] Building Shouty 0.0.1
<span class="o">[</span>INFO] <span class="nt">--------------------------------</span><span class="o">[</span> jar <span class="o">]</span><span class="nt">---------------------------------</span>
<span class="o">[</span>INFO]
<span class="o">[</span>INFO] <span class="nt">---</span> maven-clean-plugin:2.5:clean <span class="o">(</span>default-clean<span class="o">)</span> @ shouty <span class="nt">---</span>
<span class="o">[</span>INFO] Deleting /home/fedex/code/java/shouty/target
<span class="o">[</span>INFO]
<span class="o">[</span>INFO] <span class="nt">---</span> maven-resources-plugin:2.6:resources <span class="o">(</span>default-resources<span class="o">)</span> @ shouty <span class="nt">---</span>
<span class="o">[</span>INFO] Using <span class="s1">'UTF-8'</span> encoding to copy filtered resources.
<span class="o">[</span>INFO] skip non existing resourceDirectory /home/fedex/code/java/shouty/src/main/resources
<span class="o">[</span>INFO]
<span class="o">[</span>INFO] <span class="nt">---</span> maven-compiler-plugin:3.3:compile <span class="o">(</span>default-compile<span class="o">)</span> @ shouty <span class="nt">---</span>
<span class="o">[</span>INFO] Nothing to compile - all classes are up to <span class="nb">date</span>
<span class="o">[</span>INFO]
<span class="o">[</span>INFO] <span class="nt">---</span> maven-resources-plugin:2.6:testResources <span class="o">(</span>default-testResources<span class="o">)</span> @ shouty <span class="nt">---</span>
<span class="o">[</span>INFO] Using <span class="s1">'UTF-8'</span> encoding to copy filtered resources.
<span class="o">[</span>INFO] Copying 1 resource
<span class="o">[</span>INFO]
<span class="o">[</span>INFO] <span class="nt">---</span> maven-compiler-plugin:3.3:testCompile <span class="o">(</span>default-testCompile<span class="o">)</span> @ shouty <span class="nt">---</span>
<span class="o">[</span>INFO] Changes detected - recompiling the module!
<span class="o">[</span>INFO] Compiling 1 <span class="nb">source </span>file to /home/fedex/code/java/shouty/target/test-classes
<span class="o">[</span>INFO]
<span class="o">[</span>INFO] <span class="nt">---</span> maven-surefire-plugin:2.12.4:test <span class="o">(</span>default-test<span class="o">)</span> @ shouty <span class="nt">---</span>
<span class="o">[</span>INFO] Surefire report directory: /home/fedex/code/java/shouty/target/surefire-reports

<span class="nt">-------------------------------------------------------</span>
 T E S T S
<span class="nt">-------------------------------------------------------</span>
Running io.cucumber.shouty.RunCucumberTest
Feb 29, 2020 12:24:33 PM io.cucumber.junit.Cucumber &lt;init&gt;
WARNING: By default Cucumber is running <span class="k">in</span> <span class="nt">--non-strict</span> mode.
This default will change to <span class="nt">--strict</span> and <span class="nt">--non-strict</span> will be removed.
You can use <span class="nt">--strict</span> or @CucumberOptions<span class="o">(</span>strict <span class="o">=</span> <span class="nb">true</span><span class="o">)</span> to suppress this warning

Scenario: Listener is within range          <span class="c"># io/cucumber/shouty/hear_shout.feature:2</span>
  Given Lucy is located 15 metres from Sean <span class="c"># null</span>
  When Sean shouts <span class="s2">"free bagels at Sean's"</span>  <span class="c"># null</span>
  Then Lucy hears Sean’s message            <span class="c"># null</span>

Undefined scenarios:
classpath:io/cucumber/shouty/hear_shout.feature:2# Listener is within range

1 Scenarios <span class="o">(</span>1 undefined<span class="o">)</span>
3 Steps <span class="o">(</span>3 undefined<span class="o">)</span>
0m0.200s


You can implement missing steps with the snippets below:

@Given<span class="o">(</span><span class="s2">"Lucy is located {int} metres from Sean"</span><span class="o">)</span>
public void lucy_is_located_metres_from_Sean<span class="o">(</span>Integer int1<span class="o">)</span> <span class="o">{</span>
    // Write code here that turns the phrase above into concrete actions
    throw new io.cucumber.java.PendingException<span class="o">()</span><span class="p">;</span>
<span class="o">}</span>

@When<span class="o">(</span><span class="s2">"Sean shouts {string}"</span><span class="o">)</span>
public void sean_shouts<span class="o">(</span>String string<span class="o">)</span> <span class="o">{</span>
    // Write code here that turns the phrase above into concrete actions
    throw new io.cucumber.java.PendingException<span class="o">()</span><span class="p">;</span>
<span class="o">}</span>

@Then<span class="o">(</span><span class="s2">"Lucy hears Sean’s message"</span><span class="o">)</span>
public void lucy_hears_Sean_s_message<span class="o">()</span> <span class="o">{</span>
    // Write code here that turns the phrase above into concrete actions
    throw new io.cucumber.java.PendingException<span class="o">()</span><span class="p">;</span>
<span class="o">}</span>


Tests run: 1, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 0.879 sec

Results :

Tests run: 1, Failures: 0, Errors: 0, Skipped: 1

<span class="o">[</span>INFO] <span class="nt">------------------------------------------------------------------------</span>
<span class="o">[</span>INFO] BUILD SUCCESS
<span class="o">[</span>INFO] <span class="nt">------------------------------------------------------------------------</span>
<span class="o">[</span>INFO] Total <span class="nb">time</span>:  4.147 s
<span class="o">[</span>INFO] Finished at: 2020-02-29T12:24:34-03:00
<span class="o">[</span>INFO] <span class="nt">------------------------------------------------------------------------</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Undefined</em> means Cucumber doesn’t know what to do for any of the three steps we wrote in our Gherkin scenario.
It needs us to provide some <em>step definitions</em>.</p>
</div>
<div class="paragraph">
<p><span title="02.04.animation.mp4" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 12.1: 02.04.animation.mp4</span></p>
</div>
<div class="paragraph">
<p>Step definitions translate from the plain language you use in Gherkin into Java code. We write a Java method, then annotate it with a pattern.</p>
</div>
<div class="paragraph">
<p>When cucumber runs a step, it looks for a step definition with a matching pattern. If it finds one, then it executes the method.</p>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 13</span>
If it doesn’t find one… well, you’ve just seen what happens. Cucumber helpfully prints out some code snippets that we can use as a basis for new step definitions. Let’s copy those.<span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 14</span></p>
</div>
<div class="paragraph">
<p>We’ll create a new class in the shouty package <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 15</span> where we’ll paste those snippets. Make sure you create it under test and not main. <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 16</span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kn">package</span> <span class="n">shouty</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">StepDefinitions</span> <span class="o">{</span>
    <span class="nd">@Given</span><span class="o">(</span><span class="s">"Lucy is {int} metres from Sean"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">lucy_is_metres_from_Sean</span><span class="o">(</span><span class="nc">Integer</span> <span class="n">int1</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Write code here that turns the phrase above into concrete actions</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">io</span><span class="o">.</span><span class="na">cucumber</span><span class="o">.</span><span class="na">java</span><span class="o">.</span><span class="na">PendingException</span><span class="o">();</span>
    <span class="o">}</span>


    <span class="nc">Step</span> <span class="n">undefined</span>
    <span class="nc">You</span> <span class="n">can</span> <span class="n">implement</span> <span class="n">missing</span> <span class="n">steps</span> <span class="n">with</span> <span class="n">the</span> <span class="n">snippets</span> <span class="nl">below:</span>
    <span class="nd">@When</span><span class="o">(</span><span class="s">"Sean shouts {string}"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sean_shouts</span><span class="o">(</span><span class="nc">String</span> <span class="n">string</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Write code here that turns the phrase above into concrete actions</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">io</span><span class="o">.</span><span class="na">cucumber</span><span class="o">.</span><span class="na">java</span><span class="o">.</span><span class="na">PendingException</span><span class="o">();</span>
    <span class="o">}</span>


    <span class="nc">Step</span> <span class="n">undefined</span>
    <span class="nc">You</span> <span class="n">can</span> <span class="n">implement</span> <span class="n">missing</span> <span class="n">steps</span> <span class="n">with</span> <span class="n">the</span> <span class="n">snippets</span> <span class="nl">below:</span>
    <span class="nd">@Then</span><span class="o">(</span><span class="s">"Lucy should hear Sean's message"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">lucy_should_hear_Sean_s_message</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Write code here that turns the phrase above into concrete actions</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">io</span><span class="o">.</span><span class="na">cucumber</span><span class="o">.</span><span class="na">java</span><span class="o">.</span><span class="na">PendingException</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 17</span>
Now InteliJ is complaining that there are some unknown symbols. We need to add
some import statements! Pressing ALT-ENTER will do that for us.</p>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 18</span>
Let’s return to the scenario and run it again.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">Testing started at 12:28 PM ...
/usr/lib/jvm/java-1.11.0-openjdk-amd64/bin/java <span class="nt">-Dorg</span>.jetbrains.run.directory<span class="o">=</span>/home/fedex/code/java/shouty/src/test/resources/io/cucumber/shouty <span class="nt">-javaagent</span>:/home/fedex/Downloads/idea-IC-193.5662.53/lib/idea_rt.jar<span class="o">=</span>40217:/home/fedex/Downloads/idea-IC-193.5662.53/bin <span class="nt">-Dfile</span>.encoding<span class="o">=</span>UTF-8 <span class="nt">-classpath</span> /home/fedex/code/java/shouty/target/test-classes:/home/fedex/.m2/repository/io/cucumber/cucumber-java/5.1.1/cucumber-java-5.1.1.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-core/5.1.1/cucumber-core-5.1.1.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-gherkin/5.1.1/cucumber-gherkin-5.1.1.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-gherkin-vintage/5.1.1/cucumber-gherkin-vintage-5.1.1.jar:/home/fedex/.m2/repository/io/cucumber/tag-expressions/2.0.4/tag-expressions-2.0.4.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-expressions/8.3.1/cucumber-expressions-8.3.1.jar:/home/fedex/.m2/repository/io/cucumber/datatable/3.2.1/datatable-3.2.1.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-plugin/5.1.1/cucumber-plugin-5.1.1.jar:/home/fedex/.m2/repository/io/cucumber/docstring/5.1.1/docstring-5.1.1.jar:/home/fedex/.m2/repository/org/apiguardian/apiguardian-api/1.1.0/apiguardian-api-1.1.0.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-junit/5.1.1/cucumber-junit-5.1.1.jar:/home/fedex/.m2/repository/junit/junit/4.13/junit-4.13.jar:/home/fedex/.m2/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar:/home/fedex/Downloads/idea-IC-193.5662.53/plugins/junit/lib/junit-rt.jar:/home/fedex/.IdeaIC2019.3/config/plugins/cucumber-java/lib/cucumber-jvmFormatter.jar:/home/fedex/.IdeaIC2019.3/config/plugins/cucumber-java/lib/cucumber-jvmFormatter5.jar:/home/fedex/.IdeaIC2019.3/config/plugins/cucumber-java/lib/cucumber-jvmFormatter4.jar:/home/fedex/.IdeaIC2019.3/config/plugins/cucumber-java/lib/cucumber-jvmFormatter3.jar io.cucumber.core.cli.Main <span class="nt">--plugin</span> org.jetbrains.plugins.cucumber.java.run.CucumberJvm5SMFormatter /home/fedex/code/java/shouty/src/test/resources/io/cucumber/shouty/hear_shout.feature
Feb 29, 2020 12:28:30 PM io.cucumber.core.cli.Main run
WARNING: By default Cucumber is running <span class="k">in</span> <span class="nt">--non-strict</span> mode.
This default will change to <span class="nt">--strict</span> and <span class="nt">--non-strict</span> will be removed.
You can use <span class="nt">--strict</span> to suppress this warning

Step undefined
You can implement missing steps with the snippets below:
@Given<span class="o">(</span><span class="s2">"Lucy is located {int} metres from Sean"</span><span class="o">)</span>
public void lucy_is_located_metres_from_Sean<span class="o">(</span>Integer int1<span class="o">)</span> <span class="o">{</span>
    // Write code here that turns the phrase above into concrete actions
    throw new io.cucumber.java.PendingException<span class="o">()</span><span class="p">;</span>
<span class="o">}</span>


Step undefined
You can implement missing steps with the snippets below:
@When<span class="o">(</span><span class="s2">"Sean shouts {string}"</span><span class="o">)</span>
public void sean_shouts<span class="o">(</span>String string<span class="o">)</span> <span class="o">{</span>
    // Write code here that turns the phrase above into concrete actions
    throw new io.cucumber.java.PendingException<span class="o">()</span><span class="p">;</span>
<span class="o">}</span>


Step undefined
You can implement missing steps with the snippets below:
@Then<span class="o">(</span><span class="s2">"Lucy hears Sean’s message"</span><span class="o">)</span>
public void lucy_hears_Sean_s_message<span class="o">()</span> <span class="o">{</span>
    // Write code here that turns the phrase above into concrete actions
    throw new io.cucumber.java.PendingException<span class="o">()</span><span class="p">;</span>
<span class="o">}</span>


Undefined scenarios:
file:///home/fedex/code/java/shouty/src/test/resources/io/cucumber/shouty/hear_shout.feature:2# Listener is within range

1 Scenarios <span class="o">(</span>1 undefined<span class="o">)</span>
3 Steps <span class="o">(</span>3 undefined<span class="o">)</span>
0m0.365s


You can implement missing steps with the snippets below:

@Given<span class="o">(</span><span class="s2">"Lucy is located {int} metres from Sean"</span><span class="o">)</span>
public void lucy_is_located_metres_from_Sean<span class="o">(</span>Integer int1<span class="o">)</span> <span class="o">{</span>
    // Write code here that turns the phrase above into concrete actions
    throw new io.cucumber.java.PendingException<span class="o">()</span><span class="p">;</span>
<span class="o">}</span>

@When<span class="o">(</span><span class="s2">"Sean shouts {string}"</span><span class="o">)</span>
public void sean_shouts<span class="o">(</span>String string<span class="o">)</span> <span class="o">{</span>
    // Write code here that turns the phrase above into concrete actions
    throw new io.cucumber.java.PendingException<span class="o">()</span><span class="p">;</span>
<span class="o">}</span>

@Then<span class="o">(</span><span class="s2">"Lucy hears Sean’s message"</span><span class="o">)</span>
public void lucy_hears_Sean_s_message<span class="o">()</span> <span class="o">{</span>
    // Write code here that turns the phrase above into concrete actions
    throw new io.cucumber.java.PendingException<span class="o">()</span><span class="p">;</span>
<span class="o">}</span>



Process finished with <span class="nb">exit </span>code 0</code></pre>
</div>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 19</span>
There is a small bug in InteliJ’s Cucumber integration. Sometimes it doesn’t tell Cucumber where to find step definitions. This is easy to work around. Just edit the run configuration and make sure the Glue field contains the value of your package.</p>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 20</span>
Now we can run it again.</p>
</div>
<div class="paragraph">
<p>This time the output is a little different.</p>
</div>
<div class="paragraph">
<p>We now have a pending step <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 21</span> and two skipped ones.<span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 22</span></p>
</div>
<div class="paragraph">
<p>This means Cucumber found all our step definitions, and executed the
first one. But that first step definition throws a <code>PendingException</code>,<span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 23</span> which
causes Cucumber to stop, skip the rest of the steps, and mark the scenario as
pending.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">TODO: implement me

Step skipped

Step skipped

Pending scenarios:
file:///home/fedex/code/shouty-java/src/test/resources/shouty/shout.feature:3# Listener within range

1 Scenarios <span class="o">(</span>1 pending<span class="o">)</span>
3 Steps <span class="o">(</span>2 skipped, 1 pending<span class="o">)</span>
0m0.403s


io.cucumber.java.PendingException: TODO: implement me
	at shouty.StepDefinitions.lucy_is_metres_from_Sean<span class="o">(</span>StepDefinitions.java:11<span class="o">)</span>
	at ✽.Lucy is 15 metres from Sean<span class="o">(</span>file:///home/fedex/code/shouty-java/src/test/resources/shouty/shout.feature:4<span class="o">)</span>



Process finished with <span class="nb">exit </span>code 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now that we&#8217;ve wired up our step definitions to the Gherkin steps, it&#8217;s almost time to start working on our solution. First though, let&#8217;s tidy up the generated code.</p>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 24</span>
We&#8217;ll rename the <code>int</code> parameter to something that better reflects its meaning. We’ll call it <code>distance</code>.</p>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 25</span>
We can print it to the terminal to see what&#8217;s happening.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java">    <span class="nd">@Given</span><span class="o">(</span><span class="s">"Lucy is {int} metres from Sean"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">lucy_is_metres_from_Sean</span><span class="o">(</span><span class="nc">Integer</span> <span class="n">distance</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">distance</span><span class="o">);</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">io</span><span class="o">.</span><span class="na">cucumber</span><span class="o">.</span><span class="na">java</span><span class="o">.</span><span class="na">PendingException</span><span class="o">();</span>
    <span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If we run it again, <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 26</span> we can see the number 15 pop up in the output. <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 27</span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">15

TODO: implement me

Step skipped

Step skipped

Pending scenarios:
file:///home/fedex/code/shouty-java/src/test/resources/shouty/shout.feature:3# Listener within range

1 Scenarios <span class="o">(</span>1 pending<span class="o">)</span>
3 Steps <span class="o">(</span>2 skipped, 1 pending<span class="o">)</span>
0m0.417s

<span class="c"># ...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that the number 15 does not appear anywhere in our code. The value is automatically passed from the Gherkin step to the step definition. If you&#8217;re curious, that’s the <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 28</span><code>{int}</code> in the step definition pattern or <em>cucumber expression</em>. We’ll explain these patterns in detail in a future lesson.</p>
</div>
</div>
<div class="sect2">
<h3 id="_sketch_out_the_solution">2.5. Sketch out the solution</h3>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 1</span>
Now that we have the step definitions matching, we can start working on our solution. We like to use our scenarios to <em>guide</em> our development, so we&#8217;ll start designing the objects we&#8217;ll need by sketching out some code in our step definitions.</p>
</div>
<div class="paragraph">
<p>The scenario will be failing while we do this, but we should see the error messages gradually progressing as we drive out the interface to our object model.</p>
</div>
<div class="paragraph">
<p>Our next goal is for the scenario to fail because we need to implement the actual business logic. <em>Then</em> we can work on changing the business logic inside our objects to make it pass.</p>
</div>
<div class="listingblock">
<div class="title">StepDefinitions.java</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kn">package</span> <span class="n">io</span><span class="o">.</span><span class="na">cucumber</span><span class="o">.</span><span class="na">shouty</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.cucumber.java.en.Given</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.cucumber.java.en.Then</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.cucumber.java.en.When</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">StepDefinitions</span> <span class="o">{</span>
    <span class="nd">@Given</span><span class="o">(</span><span class="s">"Lucy is located {int} metres from Sean"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">lucy_is_located_metres_from_Sean</span><span class="o">(</span><span class="nc">Integer</span> <span class="n">distance</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">distance</span><span class="o">);</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">io</span><span class="o">.</span><span class="na">cucumber</span><span class="o">.</span><span class="na">java</span><span class="o">.</span><span class="na">PendingException</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@When</span><span class="o">(</span><span class="s">"Sean shouts {string}"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sean_shouts</span><span class="o">(</span><span class="nc">String</span> <span class="n">string</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Write code here that turns the phrase above into concrete actions</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">io</span><span class="o">.</span><span class="na">cucumber</span><span class="o">.</span><span class="na">java</span><span class="o">.</span><span class="na">PendingException</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Then</span><span class="o">(</span><span class="s">"Lucy hears Sean’s message"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">lucy_hears_Sean_s_message</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Write code here that turns the phrase above into concrete actions</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">io</span><span class="o">.</span><span class="na">cucumber</span><span class="o">.</span><span class="na">java</span><span class="o">.</span><span class="na">PendingException</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To implement the first step, we need to create a couple of <code>Person</code> objects, one
for Lucy <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 2</span> and one for Sean.<span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 3</span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nd">@Given</span><span class="o">(</span><span class="s">"Lucy is {int} metres from Sean"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">lucy_is_metres_from_Sean</span><span class="o">(</span><span class="nc">Integer</span> <span class="n">distance</span><span class="o">)</span> <span class="o">{</span>
    <span class="nd">@Given</span><span class="o">(</span><span class="s">"Lucy is located {int} metres from Sean"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">lucy_is_located_metres_from_Sean</span><span class="o">(</span><span class="nc">Integer</span> <span class="n">distance</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Person</span> <span class="n">lucy</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">();</span>
        <span class="nc">Person</span> <span class="n">sean</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="c1">// ...</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then we create the <code>Person</code> class to remove the errors.<span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 4</span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kn">package</span> <span class="n">shouty</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 5</span>
And specify the distance between them.</p>
</div>
<div class="paragraph">
<p>We can remove the <code>pending</code> status now, <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 6</span> and this print statement,<span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 7</span> and write the implementation for the first step like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StepDefinitions</span> <span class="o">{</span>
    <span class="nd">@Given</span><span class="o">(</span><span class="s">"Lucy is {int} metres from Sean"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">lucy_is_metres_from_Sean</span><span class="o">(</span><span class="nc">Integer</span> <span class="n">distance</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Person</span> <span class="n">lucy</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">();</span>
        <span class="nc">Person</span> <span class="n">sean</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">();</span>
        <span class="n">lucy</span><span class="o">.</span><span class="na">moveTo</span><span class="o">(</span><span class="n">distance</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">// ...</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And create the <code>moveTo</code> method in the <code>Person</code> class. <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 8</span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kn">package</span> <span class="n">shouty</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">moveTo</span><span class="o">(</span><span class="nc">Integer</span> <span class="n">distance</span><span class="o">)</span> <span class="o">{</span>

    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We have two instances of person, <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 9</span> one representing Lucy, <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 10</span> and one representing Sean. <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 11</span> Then we call a method to move Lucy to the position specified in the scenario.<span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 12</span></p>
</div>
<div class="paragraph">
<p><span title="02.05.animation.mp4" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 12.1: 02.05.animation.mp4</span></p>
</div>
<div class="paragraph">
<p>When we run the scenario, <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 13</span> the first step is green! <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 14</span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">Testing started at 11:53 AM ...
/usr/lib/jvm/java-1.11.0-openjdk-amd64/bin/java <span class="nt">-Dorg</span>.jetbrains.run.directory<span class="o">=</span>/home/fedex/code/java/shouty/src/test/resources/io/cucumber/shouty <span class="nt">-javaagent</span>:/home/fedex/Downloads/idea-IC-193.5662.53/lib/idea_rt.jar<span class="o">=</span>44551:/home/fedex/Downloads/idea-IC-193.5662.53/bin <span class="nt">-Dfile</span>.encoding<span class="o">=</span>UTF-8 <span class="nt">-classpath</span> /home/fedex/code/java/shouty/target/test-classes:/home/fedex/code/java/shouty/target/classes:/home/fedex/.m2/repository/io/cucumber/cucumber-java/5.1.1/cucumber-java-5.1.1.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-core/5.1.1/cucumber-core-5.1.1.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-gherkin/5.1.1/cucumber-gherkin-5.1.1.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-gherkin-vintage/5.1.1/cucumber-gherkin-vintage-5.1.1.jar:/home/fedex/.m2/repository/io/cucumber/tag-expressions/2.0.4/tag-expressions-2.0.4.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-expressions/8.3.1/cucumber-expressions-8.3.1.jar:/home/fedex/.m2/repository/io/cucumber/datatable/3.2.1/datatable-3.2.1.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-plugin/5.1.1/cucumber-plugin-5.1.1.jar:/home/fedex/.m2/repository/io/cucumber/docstring/5.1.1/docstring-5.1.1.jar:/home/fedex/.m2/repository/org/apiguardian/apiguardian-api/1.1.0/apiguardian-api-1.1.0.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-junit/5.1.1/cucumber-junit-5.1.1.jar:/home/fedex/.m2/repository/junit/junit/4.13/junit-4.13.jar:/home/fedex/.m2/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar:/home/fedex/Downloads/idea-IC-193.5662.53/plugins/junit/lib/junit-rt.jar:/home/fedex/.IdeaIC2019.3/config/plugins/cucumber-java/lib/cucumber-jvmFormatter.jar:/home/fedex/.IdeaIC2019.3/config/plugins/cucumber-java/lib/cucumber-jvmFormatter5.jar:/home/fedex/.IdeaIC2019.3/config/plugins/cucumber-java/lib/cucumber-jvmFormatter4.jar:/home/fedex/.IdeaIC2019.3/config/plugins/cucumber-java/lib/cucumber-jvmFormatter3.jar io.cucumber.core.cli.Main <span class="nt">--plugin</span> org.jetbrains.plugins.cucumber.java.run.CucumberJvm5SMFormatter <span class="nt">--strict</span> <span class="nt">--glue</span> io.cucumber.shouty /home/fedex/code/java/shouty/src/test/resources/io/cucumber/shouty

TODO: implement me

Step skipped

Pending scenarios:
file:///home/fedex/code/java/shouty/src/test/resources/io/cucumber/shouty/hear_shout.feature:2# Listener is within range

1 Scenarios <span class="o">(</span>1 pending<span class="o">)</span>
3 Steps <span class="o">(</span>1 skipped, 1 pending, 1 passed<span class="o">)</span>
0m0.553s


io.cucumber.java.PendingException: TODO: implement me
	at io.cucumber.shouty.StepDefinitions.sean_shouts<span class="o">(</span>StepDefinitions.java:18<span class="o">)</span>
	at ✽.Sean shouts <span class="s2">"free bagels at Sean's"</span><span class="o">(</span>file:///home/fedex/code/java/shouty/src/test/resources/io/cucumber/shouty/hear_shout.feature:4<span class="o">)</span>



Process finished with <span class="nb">exit </span>code 1</code></pre>
</div>
</div>
<div class="paragraph">
<p>We&#8217;re making progress!</p>
</div>
<div class="paragraph">
<p>We&#8217;ll keep working like this until we see the scenario failing for the right reasons.</p>
</div>
<div class="paragraph">
<p>In the second step definition, we want to tell Sean to shout something.</p>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 15</span>
In order to send instructions to Sean from the second step, we need to store him in an <em>instance variable</em>, so that he’ll be accessible from all of our step definitions. In IntelliJ we can do this by using the <em>Introduce Field</em> refactoring.</p>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 16</span>
In the <code>When</code> step, we&#8217;re capturing Sean&#8217;s message using the <code>{string}</code> pattern, so let&#8217;s give that argument a more meaningful name.<span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 17</span></p>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 18</span>
And now we can now tell him to <em>shout</em> the message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StepDefinitions</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">Person</span> <span class="n">sean</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">Person</span> <span class="n">lucy</span><span class="o">;</span>

    <span class="nd">@Given</span><span class="o">(</span><span class="s">"Lucy is located {int} metres from Sean"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">lucy_is_located_metres_from_Sean</span><span class="o">(</span><span class="nc">Integer</span> <span class="n">distance</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">lucy</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">();</span>
        <span class="n">sean</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">();</span>
        <span class="n">lucy</span><span class="o">.</span><span class="na">moveTo</span><span class="o">(</span><span class="n">distance</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@When</span><span class="o">(</span><span class="s">"Sean shouts {string}"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sean_shouts</span><span class="o">(</span><span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">sean</span><span class="o">.</span><span class="na">shout</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">// ...</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And we eliminate the compilation error by implementing the <code>shout</code> message in the <code>Person</code> class. <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 19</span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kn">package</span> <span class="n">shouty</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">moveTo</span><span class="o">(</span><span class="nc">Integer</span> <span class="n">distance</span><span class="o">)</span> <span class="o">{</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shout</span><span class="o">(</span><span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>

    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When we run the scenarion again,<span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 20</span> now the second step is green!. <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 21</span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">Testing started at 12:00 PM ...
/usr/lib/jvm/java-1.11.0-openjdk-amd64/bin/java <span class="nt">-Dorg</span>.jetbrains.run.directory<span class="o">=</span>/home/fedex/code/java/shouty/src/test/resources/io/cucumber/shouty <span class="nt">-javaagent</span>:/home/fedex/Downloads/idea-IC-193.5662.53/lib/idea_rt.jar<span class="o">=</span>39079:/home/fedex/Downloads/idea-IC-193.5662.53/bin <span class="nt">-Dfile</span>.encoding<span class="o">=</span>UTF-8 <span class="nt">-classpath</span> /home/fedex/code/java/shouty/target/test-classes:/home/fedex/code/java/shouty/target/classes:/home/fedex/.m2/repository/io/cucumber/cucumber-java/5.1.1/cucumber-java-5.1.1.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-core/5.1.1/cucumber-core-5.1.1.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-gherkin/5.1.1/cucumber-gherkin-5.1.1.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-gherkin-vintage/5.1.1/cucumber-gherkin-vintage-5.1.1.jar:/home/fedex/.m2/repository/io/cucumber/tag-expressions/2.0.4/tag-expressions-2.0.4.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-expressions/8.3.1/cucumber-expressions-8.3.1.jar:/home/fedex/.m2/repository/io/cucumber/datatable/3.2.1/datatable-3.2.1.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-plugin/5.1.1/cucumber-plugin-5.1.1.jar:/home/fedex/.m2/repository/io/cucumber/docstring/5.1.1/docstring-5.1.1.jar:/home/fedex/.m2/repository/org/apiguardian/apiguardian-api/1.1.0/apiguardian-api-1.1.0.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-junit/5.1.1/cucumber-junit-5.1.1.jar:/home/fedex/.m2/repository/junit/junit/4.13/junit-4.13.jar:/home/fedex/.m2/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar:/home/fedex/Downloads/idea-IC-193.5662.53/plugins/junit/lib/junit-rt.jar:/home/fedex/.IdeaIC2019.3/config/plugins/cucumber-java/lib/cucumber-jvmFormatter.jar:/home/fedex/.IdeaIC2019.3/config/plugins/cucumber-java/lib/cucumber-jvmFormatter5.jar:/home/fedex/.IdeaIC2019.3/config/plugins/cucumber-java/lib/cucumber-jvmFormatter4.jar:/home/fedex/.IdeaIC2019.3/config/plugins/cucumber-java/lib/cucumber-jvmFormatter3.jar io.cucumber.core.cli.Main <span class="nt">--plugin</span> org.jetbrains.plugins.cucumber.java.run.CucumberJvm5SMFormatter <span class="nt">--strict</span> <span class="nt">--glue</span> io.cucumber.shouty /home/fedex/code/java/shouty/src/test/resources/io/cucumber/shouty

TODO: implement me

Pending scenarios:
file:///home/fedex/code/java/shouty/src/test/resources/io/cucumber/shouty/hear_shout.feature:2# Listener is within range

1 Scenarios <span class="o">(</span>1 pending<span class="o">)</span>
3 Steps <span class="o">(</span>1 pending, 2 passed<span class="o">)</span>
0m0.410s


io.cucumber.java.PendingException: TODO: implement me
	at io.cucumber.shouty.StepDefinitions.lucy_hears_Sean_s_message<span class="o">(</span>StepDefinitions.java:27<span class="o">)</span>
	at ✽.Lucy hears Sean’s message<span class="o">(</span>file:///home/fedex/code/java/shouty/src/test/resources/io/cucumber/shouty/hear_shout.feature:5<span class="o">)</span>



Process finished with <span class="nb">exit </span>code 1</code></pre>
</div>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 22</span>
The last step definition is where we implement a check, or assertion. We&#8217;ll verify that what Lucy has heard is exactly the same as what Sean shouted.</p>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 23</span>
Once again we&#8217;re going to write the code we wish we had.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nd">@Then</span><span class="o">(</span><span class="s">"Lucy should hear Sean's message"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">lucy_should_hear_Sean_s_message</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="n">asList</span><span class="o">(</span><span class="n">messageFromSean</span><span class="o">),</span> <span class="n">lucy</span><span class="o">.</span><span class="na">getMessagesHeard</span><span class="o">());</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In order for this to be able to compile, we need to import the <code>assertEquals</code> static method from <code>JUnit</code> <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 24</span>  and the <code>Array.asList</code> method. <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 25</span></p>
</div>
<div class="paragraph">
<p>So we need a way to ask Lucy what messages she&#8217;s heard, and we also need to know what it was that Sean shouted.</p>
</div>
<div class="paragraph">
<p>We can record what Sean shouts by storing it in an instance variable as the <code>When</code> step runs. <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 26</span> This is a common pattern to use in Cucumber step definitions when you don’t want to repeat the same test data in different parts of a scenario. Now we can use that in the assertion check. <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 27</span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nd">@When</span><span class="o">(</span><span class="s">"Sean shouts {string}"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">sean_shouts</span><span class="o">(</span><span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">sean</span><span class="o">.</span><span class="na">shout</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
    <span class="n">messageFromSean</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
 <span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We also need to add a <code>messagesHeard</code> method to our Person class. <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 28</span> Let&#8217;s do that now, we&#8217;ll just return null for now.<span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 29</span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kn">package</span> <span class="n">shouty</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">moveTo</span><span class="o">(</span><span class="nc">Integer</span> <span class="n">distance</span><span class="o">)</span> <span class="o">{</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shout</span><span class="o">(</span><span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="nf">getMessagesHeard</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>&#8230;&#8203;and watch Cucumber run the tests again. <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 30</span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">Testing started at 12:05 PM ...
/usr/lib/jvm/java-1.11.0-openjdk-amd64/bin/java <span class="nt">-Dorg</span>.jetbrains.run.directory<span class="o">=</span>/home/fedex/code/java/shouty/src/test/resources/io/cucumber/shouty <span class="nt">-javaagent</span>:/home/fedex/Downloads/idea-IC-193.5662.53/lib/idea_rt.jar<span class="o">=</span>41983:/home/fedex/Downloads/idea-IC-193.5662.53/bin <span class="nt">-Dfile</span>.encoding<span class="o">=</span>UTF-8 <span class="nt">-classpath</span> /home/fedex/code/java/shouty/target/test-classes:/home/fedex/code/java/shouty/target/classes:/home/fedex/.m2/repository/io/cucumber/cucumber-java/5.1.1/cucumber-java-5.1.1.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-core/5.1.1/cucumber-core-5.1.1.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-gherkin/5.1.1/cucumber-gherkin-5.1.1.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-gherkin-vintage/5.1.1/cucumber-gherkin-vintage-5.1.1.jar:/home/fedex/.m2/repository/io/cucumber/tag-expressions/2.0.4/tag-expressions-2.0.4.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-expressions/8.3.1/cucumber-expressions-8.3.1.jar:/home/fedex/.m2/repository/io/cucumber/datatable/3.2.1/datatable-3.2.1.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-plugin/5.1.1/cucumber-plugin-5.1.1.jar:/home/fedex/.m2/repository/io/cucumber/docstring/5.1.1/docstring-5.1.1.jar:/home/fedex/.m2/repository/org/apiguardian/apiguardian-api/1.1.0/apiguardian-api-1.1.0.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-junit/5.1.1/cucumber-junit-5.1.1.jar:/home/fedex/.m2/repository/junit/junit/4.13/junit-4.13.jar:/home/fedex/.m2/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar:/home/fedex/Downloads/idea-IC-193.5662.53/plugins/junit/lib/junit-rt.jar:/home/fedex/.IdeaIC2019.3/config/plugins/cucumber-java/lib/cucumber-jvmFormatter.jar:/home/fedex/.IdeaIC2019.3/config/plugins/cucumber-java/lib/cucumber-jvmFormatter5.jar:/home/fedex/.IdeaIC2019.3/config/plugins/cucumber-java/lib/cucumber-jvmFormatter4.jar:/home/fedex/.IdeaIC2019.3/config/plugins/cucumber-java/lib/cucumber-jvmFormatter3.jar io.cucumber.core.cli.Main <span class="nt">--plugin</span> org.jetbrains.plugins.cucumber.java.run.CucumberJvm5SMFormatter <span class="nt">--strict</span> <span class="nt">--glue</span> io.cucumber.shouty /home/fedex/code/java/shouty/src/test/resources/io/cucumber/shouty

Step failed
java.lang.AssertionError: expected:&lt;<span class="o">[</span>free bagels at Sean<span class="s1">'s]&gt; but was:&lt;null&gt;
	at org.junit.Assert.fail(Assert.java:89)
	at org.junit.Assert.failNotEquals(Assert.java:835)
	at org.junit.Assert.assertEquals(Assert.java:120)
	at org.junit.Assert.assertEquals(Assert.java:146)
	at io.cucumber.shouty.StepDefinitions.lucy_hears_Sean_s_message(StepDefinitions.java:31)
	at ✽.Lucy hears Sean’s message(file:///home/fedex/code/java/shouty/src/test/resources/io/cucumber/shouty/hear_shout.feature:5)


Failed scenarios:
file:///home/fedex/code/java/shouty/src/test/resources/io/cucumber/shouty/hear_shout.feature:2# Listener is within range

1 Scenarios (1 failed)
3 Steps (1 failed, 2 passed)
0m0.454s


java.lang.AssertionError: expected:&lt;[free bagels at Sean'</span>s]&gt; but was:&lt;null&gt;
	at org.junit.Assert.fail<span class="o">(</span>Assert.java:89<span class="o">)</span>
	at org.junit.Assert.failNotEquals<span class="o">(</span>Assert.java:835<span class="o">)</span>
	at org.junit.Assert.assertEquals<span class="o">(</span>Assert.java:120<span class="o">)</span>
	at org.junit.Assert.assertEquals<span class="o">(</span>Assert.java:146<span class="o">)</span>
	at io.cucumber.shouty.StepDefinitions.lucy_hears_Sean_s_message<span class="o">(</span>StepDefinitions.java:31<span class="o">)</span>
	at ✽.Lucy hears Sean’s message<span class="o">(</span>file:///home/fedex/code/java/shouty/src/test/resources/io/cucumber/shouty/hear_shout.feature:5<span class="o">)</span>



Process finished with <span class="nb">exit </span>code 1</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is great! Whenever we do BDD, getting to our first failing test is a milestone. Seeing the test fail proves that it is capable of detecting errors in our code!</p>
</div>
<div class="paragraph">
<p>Never trust an automated test that you haven’t seen fail!</p>
</div>
<div class="paragraph">
<p>Now all we have to do is write the code to make it do what it&#8217;s supposed to.</p>
</div>
</div>
<div class="sect2">
<h3 id="_make_the_scenario_pass">2.6. Make the scenario pass</h3>
<div class="paragraph">
<p>So we have our failing scenario: <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 1</span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">Testing started at 12:05 PM ...
/usr/lib/jvm/java-1.11.0-openjdk-amd64/bin/java <span class="nt">-Dorg</span>.jetbrains.run.directory<span class="o">=</span>/home/fedex/code/java/shouty/src/test/resources/io/cucumber/shouty <span class="nt">-javaagent</span>:/home/fedex/Downloads/idea-IC-193.5662.53/lib/idea_rt.jar<span class="o">=</span>41983:/home/fedex/Downloads/idea-IC-193.5662.53/bin <span class="nt">-Dfile</span>.encoding<span class="o">=</span>UTF-8 <span class="nt">-classpath</span> /home/fedex/code/java/shouty/target/test-classes:/home/fedex/code/java/shouty/target/classes:/home/fedex/.m2/repository/io/cucumber/cucumber-java/5.1.1/cucumber-java-5.1.1.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-core/5.1.1/cucumber-core-5.1.1.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-gherkin/5.1.1/cucumber-gherkin-5.1.1.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-gherkin-vintage/5.1.1/cucumber-gherkin-vintage-5.1.1.jar:/home/fedex/.m2/repository/io/cucumber/tag-expressions/2.0.4/tag-expressions-2.0.4.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-expressions/8.3.1/cucumber-expressions-8.3.1.jar:/home/fedex/.m2/repository/io/cucumber/datatable/3.2.1/datatable-3.2.1.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-plugin/5.1.1/cucumber-plugin-5.1.1.jar:/home/fedex/.m2/repository/io/cucumber/docstring/5.1.1/docstring-5.1.1.jar:/home/fedex/.m2/repository/org/apiguardian/apiguardian-api/1.1.0/apiguardian-api-1.1.0.jar:/home/fedex/.m2/repository/io/cucumber/cucumber-junit/5.1.1/cucumber-junit-5.1.1.jar:/home/fedex/.m2/repository/junit/junit/4.13/junit-4.13.jar:/home/fedex/.m2/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar:/home/fedex/Downloads/idea-IC-193.5662.53/plugins/junit/lib/junit-rt.jar:/home/fedex/.IdeaIC2019.3/config/plugins/cucumber-java/lib/cucumber-jvmFormatter.jar:/home/fedex/.IdeaIC2019.3/config/plugins/cucumber-java/lib/cucumber-jvmFormatter5.jar:/home/fedex/.IdeaIC2019.3/config/plugins/cucumber-java/lib/cucumber-jvmFormatter4.jar:/home/fedex/.IdeaIC2019.3/config/plugins/cucumber-java/lib/cucumber-jvmFormatter3.jar io.cucumber.core.cli.Main <span class="nt">--plugin</span> org.jetbrains.plugins.cucumber.java.run.CucumberJvm5SMFormatter <span class="nt">--strict</span> <span class="nt">--glue</span> io.cucumber.shouty /home/fedex/code/java/shouty/src/test/resources/io/cucumber/shouty

Step failed
java.lang.AssertionError: expected:&lt;<span class="o">[</span>free bagels at Sean<span class="s1">'s]&gt; but was:&lt;null&gt;
	at org.junit.Assert.fail(Assert.java:89)
	at org.junit.Assert.failNotEquals(Assert.java:835)
	at org.junit.Assert.assertEquals(Assert.java:120)
	at org.junit.Assert.assertEquals(Assert.java:146)
	at io.cucumber.shouty.StepDefinitions.lucy_hears_Sean_s_message(StepDefinitions.java:31)
	at ✽.Lucy hears Sean’s message(file:///home/fedex/code/java/shouty/src/test/resources/io/cucumber/shouty/hear_shout.feature:5)


Failed scenarios:
file:///home/fedex/code/java/shouty/src/test/resources/io/cucumber/shouty/hear_shout.feature:2# Listener is within range

1 Scenarios (1 failed)
3 Steps (1 failed, 2 passed)
0m0.454s


java.lang.AssertionError: expected:&lt;[free bagels at Sean'</span>s]&gt; but was:&lt;null&gt;
	at org.junit.Assert.fail<span class="o">(</span>Assert.java:89<span class="o">)</span>
	at org.junit.Assert.failNotEquals<span class="o">(</span>Assert.java:835<span class="o">)</span>
	at org.junit.Assert.assertEquals<span class="o">(</span>Assert.java:120<span class="o">)</span>
	at org.junit.Assert.assertEquals<span class="o">(</span>Assert.java:146<span class="o">)</span>
	at io.cucumber.shouty.StepDefinitions.lucy_hears_Sean_s_message<span class="o">(</span>StepDefinitions.java:31<span class="o">)</span>
	at ✽.Lucy hears Sean’s message<span class="o">(</span>file:///home/fedex/code/java/shouty/src/test/resources/io/cucumber/shouty/hear_shout.feature:5<span class="o">)</span>



Process finished with <span class="nb">exit </span>code 1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Lucy is expected to hear Sean&#8217;s message, but she hasn&#8217;t heard anything: we got <code>null</code> back from the <code>messagesHeard</code> method. <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 2</span></p>
</div>
<div class="paragraph">
<p>In this case, we’re going to cheat. We have a one-line fix that will make this scenario pass, but it’s not a particularly future-proof implementation. Can you guess what it is?<span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 3</span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kn">package</span> <span class="n">shouty</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">moveTo</span><span class="o">(</span><span class="nc">Integer</span> <span class="n">distance</span><span class="o">)</span> <span class="o">{</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shout</span><span class="o">(</span><span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="nf">getMessagesHeard</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;();</span>
        <span class="n">result</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"free bagels at Sean's"</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>I told you it wasn’t very future proof!</p>
</div>
<div class="paragraph">
<p><span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 4</span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">1 Scenarios <span class="o">(</span>1 passed<span class="o">)</span>
3 Steps <span class="o">(</span>3 passed<span class="o">)</span>
0m0.366s



Process finished with <span class="nb">exit </span>code 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Woohoo! Our scenario is passing for the first time. As long as this is the only message anyone ever shouts, we&#8217;re good to ship this thing!</p>
</div>
<div class="paragraph">
<p>Now, the fact that such a poor implementation can pass our tests shows us that we need to work on our tests. A more comprehensive set of scenarios would guide us towards a better implementation.</p>
</div>
<div class="paragraph">
<p>It&#8217;s also a good habit to look for the most simple solution. We can trust that, as our scenarios evolve, so will our solution.</p>
</div>
<div class="paragraph">
<p>This is the essence of Behaviour-Driven Development. Examples of behaviour drive the development. We do just enough to make the next scenario pass, and no more.</p>
</div>
<div class="paragraph">
<p>Instead of writing a note on our TODO list, let&#8217;s write another scenario that shouts a different message. <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 5</span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="gherkin"><span class="kd">Feature</span><span class="p">:</span> Hear shout
  <span class="kn">Scenario</span><span class="p">:</span> Listener is within range
    <span class="nf">Given </span>Lucy is located 15 metres from Sean
    <span class="nf">When </span>Sean shouts <span class="s">"free bagels at Sean's"</span>
    <span class="nf">Then </span>Lucy hears Sean’s message

  <span class="kn">Scenario</span><span class="p">:</span> Listener hears a different message
    <span class="nf">Given </span>Lucy is located 15 metres from Sean
    <span class="nf">When </span>Sean shouts <span class="s">"Free coffee!"</span>
    <span class="nf">Then </span>Lucy hears Sean's message</code></pre>
</div>
</div>
<div class="paragraph">
<p>It fails, reminding us we need to find a solution that doesn&#8217;t rely on hard-coding the message. <span title="" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 6</span>
Now when we come back to this code, we can just run the tests and Cucumber will remind us what we need to do next. We&#8217;re done for today!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">Step undefined
You can implement missing steps with the snippets below:
@Given<span class="o">(</span><span class="s2">"Lucy is located 15 metres from Sean"</span><span class="o">)</span>
public void lucy_is_located_15 metres_from_Sean<span class="o">()</span> <span class="o">{</span>
    // Write code here that turns the phrase above into concrete actions
    throw new io.cucumber.java.PendingException<span class="o">()</span><span class="p">;</span>
<span class="o">}</span>


Step skipped

Step undefined
You can implement missing steps with the snippets below:
@Then<span class="o">(</span><span class="s2">"Lucy hears Sean's message"</span><span class="o">)</span>
public void lucy_hears_Sean_s_message<span class="o">()</span> <span class="o">{</span>
    // Write code here that turns the phrase above into concrete actions
    throw new io.cucumber.java.PendingException<span class="o">()</span><span class="p">;</span>
<span class="o">}</span>


Undefined scenarios:
file:///home/fedex/code/shouty-java/src/test/resources/shouty/shout.feature:8# Listener hears a different message

2 Scenarios <span class="o">(</span>1 undefined, 1 passed<span class="o">)</span>
6 Steps <span class="o">(</span>1 skipped, 2 undefined, 3 passed<span class="o">)</span>
0m0.711s


You can implement missing steps with the snippets below:

@Given<span class="o">(</span><span class="s2">"Lucy is located 15 metres from Sean"</span><span class="o">)</span>
public void lucy_is_located_15 metres_from_Sean<span class="o">()</span> <span class="o">{</span>
    // Write code here that turns the phrase above into concrete actions
    throw new io.cucumber.java.PendingException<span class="o">()</span><span class="p">;</span>
<span class="o">}</span>

@Then<span class="o">(</span><span class="s2">"Lucy hears Sean's message"</span><span class="o">)</span>
public void lucy_hears_Sean_s_message<span class="o">()</span> <span class="o">{</span>
    // Write code here that turns the phrase above into concrete actions
    throw new io.cucumber.java.PendingException<span class="o">()</span><span class="p">;</span>
<span class="o">}</span>



Process finished with <span class="nb">exit </span>code 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Of course, if you&#8217;re in the mood, you can always try to implement a solution yourself that makes both scenarios pass. Have fun!</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_expressing_yourself">3. Expressing yourself</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_cleaning_up">4. Cleaning up</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_the_importance_of_readability">4.1. The importance of readability</h3>
<div class="videoblock">
<div class="content">
<video src="https://drive.google.com/uc?id=1arEP_-0Fi5CK7EC8IYCJWrc67I_XF34Z" controls>
Your browser does not support the video tag.
</video>
</div>
</div>
<div class="paragraph">
<p><span title="04.01.animation.mp4" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 0.1: 04.01.animation.mp4</span></p>
</div>
<div class="paragraph">
<p>In the previous chapter, we talked about the importance of having readable scenarios, and you learned some new skills with cucumber expressions to help you achieve that goal. Those skills will give you the confidence to write scenarios exactly the way you want, knowing you’ll be able to match the Gherkin steps easily from your step definition code.</p>
</div>
<div class="paragraph">
<p>We emphasise readability because from our experience, writing Gherkin scenarios is a software design activity. Cucumber was created to bridge the communication gap between business domain experts and development teams. When you collaborate with domain experts to describe behaviour in Gherkin, you’re expressing the group’s shared understanding of the problem you need to solve. The words you use in your scenarios can have a deep impact on the way the software is designed, as we’ll see in later chapters.</p>
</div>
<div class="paragraph">
<p>The more fluent you become in writing Gherkin, the more useful a tool it becomes to help you facilitate this communication. Keeping your scenarios readable means you can get feedback at any time about whether you’re building the right thing. Over time, your features become living documentation about your system. We can’t emphasize enough how important it is to see your scenarios as more than just tests.</p>
</div>
<div class="paragraph">
<p>Maintaining a living document works both ways: you’ll drive your solution design from your scenarios, but you may also have to update your Gherkin to reflect the things you learn as you build the solution. This dance back and forth between features and solution code is what BDD is all about.</p>
</div>
<div class="paragraph">
<p>In this chapter, we’ll learn about feature descriptions, the Background keyword, and about keeping scenarios and code up-to-date with your current understanding of the project.</p>
</div>
<div class="paragraph">
<p>First, let’s catch up with what’s been happening on the Shouty project.</p>
</div>
</div>
<div class="sect2">
<h3 id="_review_changes_that_happened_while_we_were_away">4.2. Review changes that happened while we were away</h3>
<div class="paragraph">
<p>While we were away, the developers of Shouty have been busy working on the code. Let’s have a look at what they’ve been up to.</p>
</div>
<div class="paragraph">
<p><span title="mvn test" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 1: mvn test</span>
We’ll start out by running Cucumber.</p>
</div>
<div class="paragraph">
<p>Great! It looks like both these scenarios are working now - both the different messages that Sean shouts are being heard by Lucy.</p>
</div>
<div class="paragraph">
<p><span title="open stepdef file" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 2: open stepdef file</span>
Let’s dig into the code and see how these steps have been automated.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StepDefinitions</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">Person</span> <span class="n">sean</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">Person</span> <span class="n">lucy</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">messageFromSean</span><span class="o">;</span>

    <span class="nd">@Given</span><span class="o">(</span><span class="s">"Lucy is {int} metres from Sean"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">lucy_is_located_m_from_Sean</span><span class="o">(</span><span class="kt">int</span> <span class="n">distance</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
        <span class="nc">Network</span> <span class="n">network</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Network</span><span class="o">();</span>
        <span class="n">sean</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="n">network</span><span class="o">);</span>
        <span class="n">lucy</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="n">network</span><span class="o">);</span>
        <span class="n">lucy</span><span class="o">.</span><span class="na">moveTo</span><span class="o">(</span><span class="n">distance</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@When</span><span class="o">(</span><span class="s">"Sean shouts {string}"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sean_shouts</span><span class="o">(</span><span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
        <span class="n">sean</span><span class="o">.</span><span class="na">shout</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
        <span class="n">messageFromSean</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Then</span><span class="o">(</span><span class="s">"Lucy should hear Sean's message"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">lucy_hears_Sean_s_message</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="n">asList</span><span class="o">(</span><span class="n">messageFromSean</span><span class="o">),</span> <span class="n">lucy</span><span class="o">.</span><span class="na">getMessagesHeard</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the step definition layer, we can see that a new class has been defined, the Network. We’re creating an instance of the network here. Then we pass that network instance to each of the Person instances we create here. So both instances of Person depend on the same instance of network. The Network is what allows people to send messages to one another.</p>
</div>
<div class="paragraph">
<p>There are also a couple of new unit test classes in the shouty package, one for the Network class, and another one for the Person class.</p>
</div>
<div class="paragraph">
<p>Unit tests are fine-grained tests that define the precise behaviour of each of those classes. We’ll talk more about this in a future lesson, but feel free to have a poke around in there in the meantime.</p>
</div>
<div class="paragraph">
<p>The familiar <code>mvn test</code> command will run those unit tests as well as Cucumber.</p>
</div>
<div class="paragraph">
<p><span title="open the feature file" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 3: open the feature file</span></p>
</div>
<div class="paragraph">
<p>The first thing I notice coming back to the code is that the feature file is still talking about the distance between Lucy and Sean, but we haven’t actually implemented any behaviour around that yet.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nl">Feature:</span> <span class="nc">Shout</span>

  <span class="nl">Scenario:</span> <span class="nc">Listener</span> <span class="n">within</span> <span class="n">range</span>
    <span class="nc">Given</span> <span class="nc">Lucy</span> <span class="n">is</span> <span class="mi">15</span> <span class="n">metres</span> <span class="n">from</span> <span class="nc">Sean</span>
    <span class="nc">When</span> <span class="nc">Sean</span> <span class="n">shouts</span> <span class="s">"free bagels at Sean's"</span>
    <span class="nc">Then</span> <span class="nc">Lucy</span> <span class="n">should</span> <span class="n">hear</span> <span class="nc">Sean</span><span class="err">'</span><span class="n">s</span> <span class="n">message</span>

  <span class="nl">Scenario:</span> <span class="nc">Listener</span> <span class="n">hears</span> <span class="n">a</span> <span class="n">different</span> <span class="n">mesage</span>
    <span class="nc">Given</span> <span class="nc">Lucy</span> <span class="n">is</span> <span class="mi">15</span> <span class="n">metres</span> <span class="n">from</span> <span class="nc">Sean</span>
    <span class="nc">When</span> <span class="nc">Sean</span> <span class="n">shouts</span> <span class="s">"Free coffee!"</span>
    <span class="nc">Then</span> <span class="nc">Lucy</span> <span class="n">should</span> <span class="n">hear</span> <span class="nc">Sean</span><span class="err">'</span><span class="n">s</span> <span class="n">message</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This happens to us all the time - we have an idea for a new feature, but then we find the problem is too complex to solve all at once, so we break it down into simpler steps. If we’re not careful, little bits of that original idea can be left around like clutter, in the scenarios and in the code. That clutter can get in the way, especially if plans change.</p>
</div>
<div class="paragraph">
<p>We’re definitely going to develop this behaviour, but we’ve decided to defer it to our next iteration. Our current solution is just focussed on broadcasting messages between the people on the network.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s clean up the feature to reflect that current understanding.</p>
</div>
</div>
<div class="sect2">
<h3 id="_description_field">4.3. Description field</h3>
<div class="paragraph">
<p><span title="feature file" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 1: feature file</span>
After the feature keyword, we have space in a Gherkin document to write any arbitrary text that we like. We call this the feature’s <em>description</em>. This is a great place to write up any notes or other details that can’t easily be expressed in examples. You might have links to wiki pages or issue trackers, or to wireframes. You can put anything you like in here, as long as you don’t mention the magic word &#8220;Scenario&#8221;.</p>
</div>
<div class="paragraph">
<p><span title="writes out description and todo list" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 2: writes out description and todo list</span>
In this case, we can add a high level description of the Shouty application. Because Shouty doesn&#8217;t yet filter by proximity, we can also write a todo list here so it’s clear that we do intend to get to that soon.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="gherkin"><span class="kd">Feature</span><span class="p">:</span> Shout

  Shouty allows users to "hear" other users "shouts" as long as they are close enough to each other.

  <span class="err">To do</span><span class="p">:</span>
    <span class="err">-</span> <span class="err">only</span> <span class="err">shout</span> <span class="err">to</span> <span class="err">people</span> <span class="err">within</span> <span class="nf">a </span>certain distance</code></pre>
</div>
</div>
<div class="paragraph">
<p>Changing the description doesn’t change anything about how Cucumber will run this feature. It just helps the human beings reading this document to understand more of what you understand about the system you’re building.</p>
</div>
<div class="paragraph">
<p><span title="add Rules keyword and indent scenarios" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 3: add Rules keyword and indent scenarios</span>
Our two scenarios are examples of how Shouty can broadcast a shout to other users. This is one of the main business rules, which we can document using the Rules keyword. We&#8217;ll learn more about this in a later chapter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="gherkin">  <span class="err">Rule</span><span class="p">:</span> <span class="err">Shouts</span> <span class="err">c</span><span class="nf">an </span>be heard by other users
    <span class="kn">Scenario</span><span class="p">:</span> Listener within range
      <span class="nf">Given </span>Lucy is 15 metres from Sean
      <span class="nf">When </span>Sean shouts <span class="s">"free bagels at Sean's"</span>
      <span class="nf">Then </span>Lucy should hear Sean's message

    <span class="kn">Scenario</span><span class="p">:</span> Listener hears a different mesage
      <span class="nf">Given </span>Lucy is 15 metres from Sean
      <span class="nf">When </span>Sean shouts <span class="s">"Free coffee!"</span>
      <span class="nf">Then </span>Lucy should hear Sean's message</code></pre>
</div>
</div>
<div class="paragraph">
<p><span title="shows 'Lucy is 15 metres from Sean' step definition" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 4: shows 'Lucy is 15 metres from Sean' step definition</span>
The step “Given Lucy is 15 metres from Sean” is misleading, since the distance between the two people is not yet relevant in our current model.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java">    <span class="nd">@Given</span><span class="o">(</span><span class="s">"Lucy is {int} metres from Sean"</span><span class="o">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The step definition calls the move_to method on Person,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java">        <span class="n">lucy</span><span class="o">.</span><span class="na">moveTo</span><span class="o">(</span><span class="n">distance</span><span class="o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><span title="shows move_to method in Person class" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 5: shows move_to method in Person class</span>
but the move_to method doesn’t actually do anything.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">moveTo</span><span class="o">(</span><span class="kt">int</span> <span class="n">location</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><span title="modify first scenario in feature file" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 6: modify first scenario in feature file</span>
Let’s simplify this code to do just what it needs to do right now, and no more. We can start from the scenario by changing this single step to express what’s actually going on. We’ll work on one scenario at a time, and update the other one once we’re happy with this one.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="gherkin">  <span class="err">Rule</span><span class="p">:</span> <span class="err">Shouts</span> <span class="err">c</span><span class="nf">an </span>be heard by other users

    <span class="kn">Scenario</span><span class="p">:</span> Listener hears a message
      <span class="nf">Given </span>a person named Lucy
      <span class="nf">And </span>a person named Sean
      <span class="nf">When </span>Sean shouts <span class="s">"free bagels at Sean's"</span>
      <span class="nf">Then </span>Lucy should hear Sean's message

    <span class="kn">Scenario</span><span class="p">:</span> Listener hears a different mesage
      <span class="nf">Given </span>Lucy is 15 metres from Sean
      <span class="nf">When </span>Sean shouts <span class="s">"Free coffee!"</span>
      <span class="nf">Then </span>Lucy should hear Sean's message</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now the scenario names make sense, and we have two steps, each creating a person. Notice we’re starting to reveal some more of our domain language here: we’ve introduced the words <code>Person</code> and <code>name</code>. Person is already a part of our domain language, so it’s nice to have that revealed in the language of the scenario. Name may well become an attribute of our person soon, so it’s also useful to have that surfaced so we can get feedback about it from the team.</p>
</div>
<div class="paragraph">
<p>One thing we’ve lost by doing this is the idea that, eventually, the two people will need to be close to each other for the message to be transmitted. We definitely wouldn’t remove detail like that unilaterally, without discussing it with the other people who were involved in writing and reviewing this scenario.</p>
</div>
<div class="paragraph">
<p><span title="create new Rule and writes out two new empty scenarios for in / out of range" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 7: create new Rule and writes out two new empty scenarios for in / out of range</span>
In this case, as well as adding it to the TODO list above, we’ve decided to document the range rule, and write a couple of new empty scenarios to remind us to implement that behaviour later.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="gherkin">  <span class="err">Rule</span><span class="p">:</span> <span class="err">Shouts</span> <span class="err">should</span> <span class="err">only</span> <span class="err">be</span> <span class="err">heard</span> <span class="err">if</span> <span class="err">listener</span> <span class="err">is</span> <span class="err">within</span> <span class="err">range</span>

    <span class="kn">Scenario</span><span class="p">:</span> Listener is within range

    <span class="kn">Scenario</span><span class="p">:</span> <span class="err">Listener</span> <span class="err">is</span> <span class="err">out</span> <span class="err">of</span> <span class="err">range</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><span title="mvn clean test" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 8: mvn clean test</span>
Let’s press on. We can run Cucumber to generate new step definition snippets for the new steps and paste them into our steps file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java">    <span class="nd">@Given</span><span class="o">(</span><span class="s">"a person named Lucy"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">a_person_named_Lucy</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Write code here that turns the phrase above into concrete actions</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">io</span><span class="o">.</span><span class="na">cucumber</span><span class="o">.</span><span class="na">java</span><span class="o">.</span><span class="na">PendingException</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Given</span><span class="o">(</span><span class="s">"a person named Sean"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">a_person_named_Sean</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Write code here that turns the phrase above into concrete actions</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">io</span><span class="o">.</span><span class="na">cucumber</span><span class="o">.</span><span class="na">java</span><span class="o">.</span><span class="na">PendingException</span><span class="o">();</span>
    <span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the next lesson we&#8217;ll look at a couple of ways that we can implement these new step definitions.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_before_hook">4.4. The "Before" hook</h3>
<div class="paragraph">
<p><span title="broken implementation" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 1: broken implementation</span>
We now have two step definitions to implement, and that presents us with a bit of a problem. We need the same instance of Network available in both. We could just assume that the Lucy step will always run first and create it there, but that seems fragile. If someone wrote a new scenario that didn’t create people in the right order, they’d end up with no Network instance, and weird bugs. We want our steps to be as independent as possible, so they can be easily composed into new scenarios.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java">    <span class="nd">@Given</span><span class="o">(</span><span class="s">"a person named Lucy"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">a_person_named_Lucy</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">lucy</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="n">network</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Given</span><span class="o">(</span><span class="s">"a person named Sean"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">a_person_named_Sean</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">sean</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="n">network</span><span class="o">);</span>
    <span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><span title="Network as instance field" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 2: Network as instance field</span>
There are a couple of different ways to create this network instance in Java. The most straightforward is to create a network field and initialize it in the declaration of the <code>StepDefinitions</code> class. Every time Cucumber runs a scenario it creates a new instance of this class, so we’ll get a fresh instance of the Network for each scenario.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StepDefinitions</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">Person</span> <span class="n">sean</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">Person</span> <span class="n">lucy</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">messageFromSean</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">Network</span> <span class="n">network</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Network</span><span class="o">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As an alternative, that can be useful if you have more complex setup to do, you can use a hook.</p>
</div>
<div class="paragraph">
<p><span title="Using a Before hook" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 3: Using a Before hook</span>
We need an instance of Network in every scenario, so we can declare a Before Hook that creates one before each scenario starts, like this:
Now we can use that Network instance as we create Lucy and Sean in these two new steps.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java">    <span class="nd">@Before</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createNetwork</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">network</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Network</span><span class="o">();</span>
    <span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java">    <span class="nd">@Given</span><span class="o">(</span><span class="s">"a person named Lucy"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">a_person_named_Lucy</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">lucy</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="n">network</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Given</span><span class="o">(</span><span class="s">"a person named Sean"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">a_person_named_Sean</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">sean</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="n">network</span><span class="o">);</span>
    <span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><span title="mvn test" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 4: mvn test</span>
It should be working again now. Let’s run cucumber to check.</p>
</div>
<div class="paragraph">
<p><span title="Copy and paste in feature file" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 5: Copy and paste in feature file</span>
Good. Let’s do the same with the other scenario.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="gherkin">    <span class="kn">Scenario</span><span class="p">:</span> Listener hears a different mesage
      <span class="nf">Given </span>a person named Lucy
      <span class="nf">And </span>a person named Sean
      <span class="nf">When </span>Sean shouts <span class="s">"Free coffee!"</span>
      <span class="nf">Then </span>Lucy should hear Sean's message</code></pre>
</div>
</div>
<div class="paragraph">
<p><span title="mvn test" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 6: mvn test</span></p>
</div>
<div class="paragraph">
<p><span title="Delete lucy_is_located_m_from_Sean" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 7: Delete lucy_is_located_m_from_Sean</span>
Now we can remove this old step definition. We know we&#8217;ll need something like this in the future when we implement the proximity rule, but we don&#8217;t want to second-guess what that code will look like, so let&#8217;s clean it out for now.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kn">package</span> <span class="n">shouty</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.cucumber.java.Before</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.cucumber.java.en.Given</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.cucumber.java.en.Then</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.cucumber.java.en.When</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">StepDefinitions</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">Person</span> <span class="n">sean</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">Person</span> <span class="n">lucy</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">messageFromSean</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">Network</span> <span class="n">network</span><span class="o">;</span>

    <span class="nd">@Before</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createNetwork</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">network</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Network</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Given</span><span class="o">(</span><span class="s">"a person named Lucy"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">a_person_named_Lucy</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">lucy</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="n">network</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Given</span><span class="o">(</span><span class="s">"a person named Sean"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">a_person_named_Sean</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">sean</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="n">network</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@When</span><span class="o">(</span><span class="s">"Sean shouts {string}"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sean_shouts</span><span class="o">(</span><span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
        <span class="n">sean</span><span class="o">.</span><span class="na">shout</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
        <span class="n">messageFromSean</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Then</span><span class="o">(</span><span class="s">"Lucy should hear Sean's message"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">lucy_hears_Sean_s_message</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="n">asList</span><span class="o">(</span><span class="n">messageFromSean</span><span class="o">),</span> <span class="n">lucy</span><span class="o">.</span><span class="na">getMessagesHeard</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><span title="mvn test" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 8: mvn test</span></p>
</div>
<div class="paragraph">
<p><span title="delete moveTo" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 9: delete moveTo</span>
Now we have one last bit of dead code left, the move_to method on Person. Let&#8217;s clean that up too.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kn">package</span> <span class="n">shouty</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">messagesHeard</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;();</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Network</span> <span class="n">network</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Person</span><span class="o">(</span><span class="nc">Network</span> <span class="n">network</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">network</span> <span class="o">=</span> <span class="n">network</span><span class="o">;</span>
        <span class="n">network</span><span class="o">.</span><span class="na">subscribe</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="nf">getMessagesHeard</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">messagesHeard</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shout</span><span class="o">(</span><span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">network</span><span class="o">.</span><span class="na">broadcast</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">hear</span><span class="o">(</span><span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">messagesHeard</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><span title="mvn test" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 10: mvn test</span></p>
</div>
</div>
<div class="sect2">
<h3 id="_create_person_in_a_generic_stepdef">4.5. Create Person in a generic stepdef</h3>
<div class="paragraph">
<p><span title="Freeze of code from end of lesson 4" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 1: Freeze of code from end of lesson 4</span></p>
</div>
<div class="paragraph">
<p>OK, so we’ve cleaned things up a bit, to bring the scenarios, the code and our current understanding of the problem all into sync. What’s nice to see is how well those new steps that create Lucy and Sean match the code inside the step definition.</p>
</div>
<div class="paragraph">
<p>When step definitions have to make a big leap to translate between our plain-language description of the domain in the Gherkin scenario, and the code, that’s usually a sign that something is wrong. We like to see step definitions that are only one or two lines long, because that usually indicates our scenarios are doing a good job of reflecting the domain model in the code, and vice-versa.</p>
</div>
<div class="paragraph">
<p>One problem that we still have with these scenarios is that we’re very fixed to only being able to use these two characters, Lucy and Sean. If we want to introduce anyone else into the scenario, we’re going to be creating quite a lot of duplicate code. In fact, the two steps for creating Lucy and Sean are almost identical, apart from those instance variables.</p>
</div>
<div class="paragraph">
<p>On a real project we wouldn’t bother about such a tiny amount of duplication at this early stage, but this isn’t a real project! Let’s play with the skills we learned last week to make a single step definition that can create Lucy or Sean.</p>
</div>
<div class="paragraph">
<p>The first problem we’ll need to tackle is these hard-coded instance variable names.</p>
</div>
<div class="paragraph">
<p>We can use a Map to store all the people involved in the scenario.</p>
</div>
<div class="paragraph">
<p>Let’s try replacing Lucy first.</p>
</div>
<div class="paragraph">
<p><span title="Edit Stepdefs.java, adding private instance field <strong>people</strong>, creating in @Before hook, and using for Lucy throughout" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 2: Edit Stepdefs.java, adding private instance field <strong>people</strong>, creating in @Before hook, and using for Lucy throughout</span>
We’ll start by creating a new hash/map in the before hook, like this.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java">    <span class="kd">private</span> <span class="nc">HashMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Person</span><span class="o">&gt;</span> <span class="n">people</span><span class="o">;</span>

    <span class="nd">@Before</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createNetwork</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">network</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Network</span><span class="o">();</span>
        <span class="n">people</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
    <span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we can store Lucy in a key in that hash/map. We’ll use her name as the key, hard-coding it for now.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java">    <span class="nd">@Given</span><span class="o">(</span><span class="s">"a person named Lucy"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">a_person_named_Lucy</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">people</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"Lucy"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="n">network</span><span class="o">));</span>
    <span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, where we check Lucy’s messages heard here in the assertion, we need to fetch her out of the hash/map.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java">    <span class="nd">@Then</span><span class="o">(</span><span class="s">"Lucy should hear Sean's message"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">lucy_hears_Sean_s_message</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="n">asList</span><span class="o">(</span><span class="n">messageFromSean</span><span class="o">),</span> <span class="n">people</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"Lucy"</span><span class="o">).</span><span class="na">getMessagesHeard</span><span class="o">());</span>
    <span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><span title="mvn test" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 3: mvn test</span></p>
</div>
<div class="paragraph">
<p>With that little refactoring done, we can now try and make this first step generic for any name.</p>
</div>
<div class="paragraph">
<p><span title="change expression to 'a person named {word}', edit parameters, change HashMap access" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 4: change expression to 'a person named {word}', edit parameters, change HashMap access</span>
Using your new found Cucumber expression skills from the last lesson, you’ll know that if we replace the word Lucy here with a 'word' expression, we’ll have the name passed into our step definition as an argument, here. Now we can use that as the key in the hash/map.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java">    <span class="nd">@Given</span><span class="o">(</span><span class="s">"a person named {word}"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">a_person_named</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">people</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">(</span><span class="n">network</span><span class="o">));</span>
    <span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><span title="mvn test FAILS" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 5: mvn test FAILS</span>
If we try and run Cucumber now, we get an error about an ambiguous match. Our generic step definition is now matching the step “a person named Sean”, but so is the original one. In bigger projects, this can be a real issue, so this warning is important.</p>
</div>
<div class="paragraph">
<p><span title="Delete a_person_named_Sean() and replace Sean instance with HashMap element" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 6: Delete a_person_named_Sean() and replace Sean instance with HashMap element</span>
Let’s remove the old step definition, and fetch Sean from the hash/map here where he shouts his message.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java">    <span class="nd">@When</span><span class="o">(</span><span class="s">"Sean shouts {string}"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sean_shouts</span><span class="o">(</span><span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
        <span class="n">people</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"Sean"</span><span class="o">).</span><span class="na">shout</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
        <span class="n">messageFromSean</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
    <span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><span title="mvn test" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 7: mvn test</span></p>
</div>
<div class="paragraph">
<p>Great, we’re green again.</p>
</div>
</div>
<div class="sect2">
<h3 id="_backgrounds">4.6. Backgrounds</h3>
<div class="paragraph">
<p><span title="Feature file" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 1: Feature file</span>
Let’s switch back to the feature to show you one more technique for improving the readability of your scenarios.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="gherkin">  <span class="err">Rule</span><span class="p">:</span> <span class="err">Shouts</span> <span class="err">c</span><span class="nf">an </span>be heard by other users

    <span class="kn">Scenario</span><span class="p">:</span> Listener hears a message
      <span class="nf">Given </span>a person named Lucy
      <span class="nf">And </span>a person named Sean
      <span class="nf">When </span>Sean shouts <span class="s">"free bagels at Sean's"</span>
      <span class="nf">Then </span>Lucy should hear Sean's message

    <span class="kn">Scenario</span><span class="p">:</span> Listener hears a different mesage
      <span class="nf">Given </span>a person named Lucy
      <span class="nf">And </span>a person named Sean
      <span class="nf">When </span>Sean shouts <span class="s">"Free coffee!"</span>
      <span class="nf">Then </span>Lucy should hear Sean's message</code></pre>
</div>
</div>
<div class="paragraph">
<p>When we have common context steps - the givens - in all the scenarios in our feature, it can sometimes be useful to get those out of the way.</p>
</div>
<div class="paragraph">
<p><span title="move Given steps into background" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 2: move Given steps into background</span>
We can literally move them into the background, using a background keyword, like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="gherkin">  <span class="kn">Background</span><span class="p">:</span>
    <span class="nf">Given </span>a person named Lucy
    <span class="nf">And </span>a person named Sean</code></pre>
</div>
</div>
<div class="paragraph">
<p><span title="mvn test" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 3: mvn test</span>
As far as Cucumber is concerned, these scenarios haven’t changed. It will still create both Lucy and Sean as the first things it does when running each of these scenarios.</p>
</div>
<div class="paragraph">
<p><span title="Feature file, showing Background and shortened scenarios" style="border-radius: 10px; padding: 2px 5px 2px 5px; color: white; font-weight: bold; background-color: red; font-family: sans-serif;">Shot 4: Feature file, showing Background and shortened scenarios</span>
But from a readability point of view, we can now see  more clearly what’s important and interesting about these two scenarios - in this case, the message being shouted.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="gherkin">  <span class="err">Rule</span><span class="p">:</span> <span class="err">Shouts</span> <span class="err">c</span><span class="nf">an </span>be heard by other users

    <span class="kn">Scenario</span><span class="p">:</span> Listener hears a message
      <span class="nf">When </span>Sean shouts <span class="s">"free bagels at Sean's"</span>
      <span class="nf">Then </span>Lucy should hear Sean's message

    <span class="kn">Scenario</span><span class="p">:</span> Listener hears a different mesage
      <span class="nf">When </span>Sean shouts <span class="s">"Free coffee!"</span>
      <span class="nf">Then </span>Lucy should hear Sean's message</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice we just went straight into When steps in our scenarios. That’s absolutely fine. We still have a context for the scenario, but we’ve chosen to push it off into the background.</p>
</div>
<div class="paragraph">
<p>Again, it’s debatable whether we’d bother to use a Background yet on a real project, but this at least illustrates the technique. Hopefully you’re already thinking about how you can use it on your own code.</p>
</div>
<div class="videoblock">
<div class="content">
<video src="https://drive.google.com/uc?id=19VLE9qKbVN4bpMxsIVvPtPqc3RGw4bSW" controls>
Your browser does not support the video tag.
</video>
</div>
</div>
<div class="paragraph">
<p>To maintain trust in the BDD process, it’s important to keep your features fresh. Even when you drive the development from BDD scenarios, you’ll still learn lessons from the implementation that might need to be fed back into your Gherkin documentation.</p>
</div>
<div class="paragraph">
<p>In this case, we discovered that we could find a smaller slice of this story, and defer the business rule about proximity until our next iteration. Splitting stories like this is a powerful agile technique, and one that BDD can help you to master. Now we have a clean codebase and suite of scenarios that reflects the current state of the system’s development.</p>
</div>
<div class="paragraph">
<p>We’re ready to start the next iteration.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-05-15 13:44:17 UTC
</div>
</div>
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge .cm {
  color: #999988;
  font-style: italic;
}
pre.rouge .cp {
  color: #999999;
  font-weight: bold;
}
pre.rouge .c1 {
  color: #999988;
  font-style: italic;
}
pre.rouge .cs {
  color: #999999;
  font-weight: bold;
  font-style: italic;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cpf {
  color: #999988;
  font-style: italic;
}
pre.rouge .err {
  color: #a61717;
  background-color: #e3d2d2;
}
pre.rouge .gd {
  color: #000000;
  background-color: #ffdddd;
}
pre.rouge .ge {
  color: #000000;
  font-style: italic;
}
pre.rouge .gr {
  color: #aa0000;
}
pre.rouge .gh {
  color: #999999;
}
pre.rouge .gi {
  color: #000000;
  background-color: #ddffdd;
}
pre.rouge .go {
  color: #888888;
}
pre.rouge .gp {
  color: #555555;
}
pre.rouge .gs {
  font-weight: bold;
}
pre.rouge .gu {
  color: #aaaaaa;
}
pre.rouge .gt {
  color: #aa0000;
}
pre.rouge .kc {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kd {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kn {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kp {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kr {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kt {
  color: #445588;
  font-weight: bold;
}
pre.rouge .k, pre.rouge .kv {
  color: #000000;
  font-weight: bold;
}
pre.rouge .mf {
  color: #009999;
}
pre.rouge .mh {
  color: #009999;
}
pre.rouge .il {
  color: #009999;
}
pre.rouge .mi {
  color: #009999;
}
pre.rouge .mo {
  color: #009999;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mx {
  color: #009999;
}
pre.rouge .sb {
  color: #d14;
}
pre.rouge .sc {
  color: #d14;
}
pre.rouge .sd {
  color: #d14;
}
pre.rouge .s2 {
  color: #d14;
}
pre.rouge .se {
  color: #d14;
}
pre.rouge .sh {
  color: #d14;
}
pre.rouge .si {
  color: #d14;
}
pre.rouge .sx {
  color: #d14;
}
pre.rouge .sr {
  color: #009926;
}
pre.rouge .s1 {
  color: #d14;
}
pre.rouge .ss {
  color: #990073;
}
pre.rouge .s, pre.rouge .sa, pre.rouge .dl {
  color: #d14;
}
pre.rouge .na {
  color: #008080;
}
pre.rouge .bp {
  color: #999999;
}
pre.rouge .nb {
  color: #0086B3;
}
pre.rouge .nc {
  color: #445588;
  font-weight: bold;
}
pre.rouge .no {
  color: #008080;
}
pre.rouge .nd {
  color: #3c5d5d;
  font-weight: bold;
}
pre.rouge .ni {
  color: #800080;
}
pre.rouge .ne {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nf, pre.rouge .fm {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nl {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nn {
  color: #555555;
}
pre.rouge .nt {
  color: #000080;
}
pre.rouge .vc {
  color: #008080;
}
pre.rouge .vg {
  color: #008080;
}
pre.rouge .vi {
  color: #008080;
}
pre.rouge .nv, pre.rouge .vm {
  color: #008080;
}
pre.rouge .ow {
  color: #000000;
  font-weight: bold;
}
pre.rouge .o {
  color: #000000;
  font-weight: bold;
}
pre.rouge .w {
  color: #bbbbbb;
}
pre.rouge {
  background-color: #f8f8f8;
}
</style>
</body>
</html>